<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–æ–∂–¥–µ—Å—Ç–≤–æ –¥–ª—è –õ—é–±–∏–º–æ–π</title>
    <!-- –®—Ä–∏—Ñ—Ç—ã: –†—É–∫–æ–ø–∏—Å–Ω—ã–π –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∏ –∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Alice&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #4a0e0e; /* –ì–ª—É–±–æ–∫–∏–π –±–æ—Ä–¥–æ–≤—ã–π */
            --bg-gradient: radial-gradient(circle at center, #781d1d 0%, #2b0505 100%);
            --gold: #d4af37;
            --ribbon-red: #c0392b;
            --paper: #fdfbf7;
            --text-color: #3e2723;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--bg-gradient);
            min-height: 100vh;
            font-family: 'Alice', serif;
            color: #fff;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- –ì–ò–†–õ–Ø–ù–î–ê --- */
        .lights-strand {
            position: absolute;
            top: -15px;
            left: 0;
            width: 100%;
            height: 60px;
            z-index: 1;
            display: flex;
            justify-content: space-around;
            padding: 0 10px;
            pointer-events: none;
        }

        .light {
            position: relative;
            width: 12px;
            height: 25px;
            border-radius: 50%;
            background: #fff;
            animation: glow 1.5s infinite alternate;
        }
        
        .light::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 8px;
            background: #222;
        }

        .light:nth-child(odd) { background: #ffeb3b; box-shadow: 0 5px 20px #ffeb3b; animation-duration: 1.2s; }
        .light:nth-child(2n) { background: #ff5252; box-shadow: 0 5px 20px #ff5252; animation-duration: 1.8s; }
        .light:nth-child(3n) { background: #00e676; box-shadow: 0 5px 20px #00e676; animation-duration: 1.5s; }
        .light:nth-child(4n) { background: #2979ff; box-shadow: 0 5px 20px #2979ff; animation-duration: 2s; }

        @keyframes glow {
            0% { opacity: 0.6; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        /* --- –ó–ê–ì–û–õ–û–í–û–ö --- */
        header {
            text-align: center;
            margin-top: 60px;
            margin-bottom: 20px;
            z-index: 2;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 4.5rem;
            margin: 0;
            color: var(--gold);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            line-height: 1.2;
        }

        p.subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
            letter-spacing: 1px;
        }

        /* --- –ö–ê–õ–ï–ù–î–ê–†–¨ (–°–ï–¢–ö–ê) --- */
        .calendar-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 30px;
            width: 90%;
            max-width: 1000px;
            padding: 20px;
            margin-bottom: 50px;
            z-index: 2;
        }

        /* --- –ü–û–î–ê–†–û–ö (–Ø–ß–ï–ô–ö–ê) --- */
        .gift-box {
            position: relative;
            height: 130px;
            background: #fff; /* –¶–≤–µ—Ç –∫–æ—Ä–æ–±–∫–∏ */
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            transform-style: preserve-3d;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –õ–µ–Ω—Ç–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è */
        .gift-box::before {
            content: '';
            position: absolute;
            width: 25px;
            height: 100%;
            background: var(--ribbon-red);
            border-left: 2px solid rgba(0,0,0,0.1);
            border-right: 2px solid rgba(0,0,0,0.1);
        }
        
        /* –õ–µ–Ω—Ç–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è */
        .gift-box::after {
            content: '';
            position: absolute;
            height: 25px;
            width: 100%;
            background: var(--ribbon-red);
            border-top: 2px solid rgba(0,0,0,0.1);
            border-bottom: 2px solid rgba(0,0,0,0.1);
        }

        /* –ù–æ–º–µ—Ä –¥–Ω—è */
        .day-number {
            position: relative;
            z-index: 5;
            font-family: 'Great Vibes', cursive;
            font-size: 3rem;
            color: var(--gold);
            text-shadow: 1px 1px 0 #000;
            background: rgba(255,255,255,0.9);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--ribbon-red);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        /* –ë–∞–Ω—Ç–∏–∫ —Å–≤–µ—Ä—Ö—É */
        .bow {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 30px;
            z-index: 4;
        }
        
        .bow::before, .bow::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--ribbon-red);
            border: 2px solid #a93226;
        }
        .bow::before { left: 0; transform: skew(10deg); }
        .bow::after { right: 0; transform: skew(-10deg); }

        /* –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–≤–µ–¥–µ–Ω–∏—è */
        .gift-box:not(.locked):not(.opened):hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.4); /* –ó–æ–ª–æ—Ç–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
        }
        
        .gift-box:not(.locked):not(.opened):hover .day-number {
            color: var(--ribbon-red);
            border-color: var(--gold);
        }

        /* –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û (–°–µ—Ä—ã–π –ø–æ–¥–∞—Ä–æ–∫) */
        .gift-box.locked {
            background: #dcdcdc;
            cursor: not-allowed;
            filter: grayscale(0.8);
            opacity: 0.7;
        }
        .gift-box.locked::before, .gift-box.locked::after { background: #7f8c8d; }
        .gift-box.locked .bow::before, .gift-box.locked .bow::after { background: #7f8c8d; }
        .gift-box.locked .day-number { color: #7f8c8d; border-color: #555; }

        /* –û–¢–ö–†–´–¢–û (–ü—É—Å—Ç–∞—è –∫–æ—Ä–æ–±–∫–∞ –∏–ª–∏ –æ—Å–æ–±–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å) */
        .gift-box.opened {
            background: #fff8e1; /* –°–≤–µ—Ç–ª–æ-–∂–µ–ª—Ç—ã–π –≤–Ω—É—Ç—Ä–∏ */
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            transform: scale(0.95);
            border: 2px dashed var(--gold);
        }
        .gift-box.opened::before, .gift-box.opened::after, .gift-box.opened .bow {
            display: none; /* –£–±–∏—Ä–∞–µ–º –ª–µ–Ω—Ç—ã */
        }
        .gift-box.opened .day-number {
            background: transparent;
            box-shadow: none;
            border: none;
            font-size: 2rem;
            color: var(--ribbon-red);
        }
        .gift-box.opened::after { /* –ì–∞–ª–æ—á–∫–∞ –∏–ª–∏ —Å–µ—Ä–¥—Ü–µ –≤–º–µ—Å—Ç–æ –ª–µ–Ω—Ç */
            content: '‚ù§Ô∏è';
            font-size: 2rem;
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: block;
            background: none;
            width: auto; height: auto;
            border: none;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.2); }
            30% { transform: scale(1); }
        }

        /* --- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û (–ü–ò–°–¨–ú–û) --- */
        .letter-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .letter {
            background: var(--paper);
            width: 90%;
            max-width: 500px;
            padding: 40px;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            transform: rotate(-2deg);
            animation: letterAppear 0.5s ease-out;
            border: 1px solid #e0e0e0;
        }

        /* –¢–µ–∫—Å—Ç—É—Ä–∞ –±—É–º–∞–≥–∏ */
        .letter::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("https://www.transparenttextures.com/patterns/cream-paper.png");
            opacity: 0.5;
            pointer-events: none;
        }
        
        /* –ú–∞—Ä–∫–∞ –≤ —É–≥–ª—É */
        .stamp {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 60px;
            border: 3px dotted #c0392b;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #c0392b;
            font-size: 0.8rem;
            transform: rotate(5deg);
            opacity: 0.7;
        }

        @keyframes letterAppear {
            0% { transform: translateY(100vh) rotate(10deg); opacity: 0; }
            100% { transform: translateY(0) rotate(-2deg); opacity: 1; }
        }

        .quote-content {
            font-family: 'Alice', serif;
            font-size: 1.4rem;
            line-height: 1.6;
            color: var(--text-color);
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .quote-author {
            text-align: right;
            font-style: italic;
            color: #795548;
            font-size: 1rem;
            margin-top: 15px;
            border-top: 1px solid #d7ccc8;
            padding-top: 10px;
            position: relative;
            z-index: 2;
        }

        .close-letter {
            display: block;
            margin: 30px auto 0;
            background: var(--ribbon-red);
            color: white;
            border: none;
            padding: 10px 30px;
            font-family: 'Alice', serif;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            position: relative;
            z-index: 2;
        }
        .close-letter:hover { transform: scale(1.05); background: #a93226; }

        /* –°–Ω–µ–≥ */
        .snow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        /* –û—Å–æ–±—ã–π 30-–π –¥–µ–Ω—å */
        .gift-box.special-day {
            background: var(--gold);
        }
        .gift-box.special-day .day-number {
            border-color: #fff;
            color: #fff;
            background: var(--ribbon-red);
        }
        
        @media (max-width: 600px) {
            h1 { font-size: 3rem; }
            .calendar-container { grid-template-columns: repeat(3, 1fr); gap: 15px; }
            .gift-box { height: 100px; }
            .day-number { width: 40px; height: 40px; font-size: 2rem; }
        }

    </style>
</head>
<body>

<!-- –ì–∏—Ä–ª—è–Ω–¥–∞ -->
<div class="lights-strand">
    <div class="light"></div><div class="light"></div><div class="light"></div>
    <div class="light"></div><div class="light"></div><div class="light"></div>
    <div class="light"></div><div class="light"></div><div class="light"></div>
    <div class="light"></div><div class="light"></div><div class="light"></div>
</div>

<header>
    <h1>30 –î–Ω–µ–π –õ—é–±–≤–∏</h1>
    <p class="subtitle">–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è —Ç–µ–±—è...</p>
</header>

<div class="calendar-container" id="calendar">
    <!-- JS —Å–æ–∑–¥–∞—Å—Ç –ø–æ–¥–∞—Ä–∫–∏ –∑–¥–µ—Å—å -->
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–ü–∏—Å—å–º–æ) -->
<div class="letter-overlay" id="modal">
    <div class="letter">
        <div class="stamp">LOVE<br>MAIL</div>
        <div class="quote-content" id="modalText">...</div>
        <div class="quote-author" id="modalSource">...</div>
        <button class="close-letter" onclick="closeModal()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è</button>
    </div>
</div>

<canvas class="snow" id="snowCanvas"></canvas>

<script>
    // --- –¶–ò–¢–ê–¢–´ (30 —à—Ç) ---
    // –ì–ª—É–±–æ–∫–∏–µ, —Ç–µ–ø–ª—ã–µ, –∏–∑ –ì–ü, –ú–∞–ª–µ–Ω—å–∫–æ–≥–æ –ø—Ä–∏–Ω—Ü–∞ –∏ –∫–ª–∞—Å—Å–∏–∫–∏
    const quotes = [
        { t: "–ü–æ—Å–ª–µ —Å—Ç–æ–ª—å–∫–∏—Ö –ª–µ—Ç? ‚Äî –í—Å–µ–≥–¥–∞.", s: "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä: –°–µ–≤–µ—Ä—É—Å –°–Ω–µ–π–ø" },
        { t: "–ó–æ—Ä–∫–æ –æ–¥–Ω–æ –ª–∏—à—å —Å–µ—Ä–¥—Ü–µ. –°–∞–º–æ–≥–æ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–ª–∞–∑–∞–º–∏ –Ω–µ —É–≤–∏–¥–∏—à—å.", s: "–ú–∞–ª–µ–Ω—å–∫–∏–π –ø—Ä–∏–Ω—Ü" },
        { t: "–ï—Å–ª–∏ —Ç–µ–±–µ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –∑–∞—Ö–æ—á–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —Ç–∞–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ–∂–µ—Ç –æ–¥–æ–ª–µ—Ç—å –ª—é–±—É—é –±–µ–¥—É, –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–∏ –≤ –∑–µ—Ä–∫–∞–ª–æ.", s: "–•/—Ñ ¬´–†–µ–≤–æ–ª—å–≤–µ—Ä¬ª" },
        { t: "–°—á–∞—Å—Ç—å–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –¥–∞–∂–µ –≤ —Ç—ë–º–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞, –µ—Å–ª–∏ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É.", s: "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä: –ê–ª—å–±—É—Å –î–∞–º–±–ª–¥–æ—Ä" },
        { t: "–í –º–∏—Ä–µ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ª—É—á—à–µ, —á–µ–º –ª—é–±–∏—Ç—å –∏ –±—ã—Ç—å –ª—é–±–∏–º—ã–º.", s: "–ú—É–ª–µ–Ω –†—É–∂" },
        { t: "–¢—ã –Ω–∞–≤—Å–µ–≥–¥–∞ –≤ –æ—Ç–≤–µ—Ç–µ –∑–∞ –≤—Å–µ—Ö, –∫–æ–≥–æ –ø—Ä–∏—Ä—É—á–∏–ª.", s: "–ú–∞–ª–µ–Ω—å–∫–∏–π –ø—Ä–∏–Ω—Ü" },
        { t: "–Ø –ª—é–±–ª—é —Ç–µ–±—è. –Ø –∑–Ω–∞–ª —ç—Ç–æ —Å –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—à–µ–π –ø–µ—Ä–≤–æ–π –≤—Å—Ç—Ä–µ—á–∏.", s: "–ú–æ–π –ø–∞—Ä–µ–Ω—å ‚Äì –ø—Å–∏—Ö" },
        { t: "–¢—ã –æ–∫–æ–ª–¥–æ–≤–∞–ª–∞ –º–µ–Ω—è, —Ç–µ–ª–æ –∏ –¥—É—à—É. –ò —è –ª—é–±–ª—é... —è –ª—é–±–ª—é... —è –ª—é–±–ª—é —Ç–µ–±—è.", s: "–ì–æ—Ä–¥–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—É–±–µ–∂–¥–µ–Ω–∏–µ" },
        { t: "–õ—É—á—à–µ–µ, –∑–∞ —á—Ç–æ –º–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ –∂–∏–∑–Ω–∏ ‚Äî –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–∞.", s: "–û–¥—Ä–∏ –•–µ–ø–±–µ—Ä–Ω" },
        { t: "–†–∞–∑–≤–µ —ç—Ç–æ –Ω–µ —á—É–¥–æ ‚Äî –±—ã—Ç—å —á—å–∏–º-—Ç–æ —Å–∞–º—ã–º –≤–∞–∂–Ω—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º?", s: "P.S. –Ø –ª—é–±–ª—é —Ç–µ–±—è" },
        
        { t: "–ú–æ–∂–µ—Ç –±—ã—Ç—å, —è –Ω–µ —Å–∞–º—ã–π —É–º–Ω—ã–π, –Ω–æ —è –∑–Ω–∞—é, —á—Ç–æ —Ç–∞–∫–æ–µ –ª—é–±–æ–≤—å.", s: "–§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø" },
        { t: "–Ø —Ö–æ—Ç–µ–ª –±—ã –ø—Ä–æ–∂–∏—Ç—å —Å —Ç–æ–±–æ–π –æ–¥–Ω—É –∂–∏–∑–Ω—å, –∞ –Ω–µ –ø—Ä–æ–∂–∏—Ç—å –≤—Å–µ —ç–ø–æ—Ö–∏ –º–∏—Ä–∞ –≤ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ.", s: "–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü" },
        { t: "–ö–æ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —Ö–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Å—Ç–∏ –æ—Å—Ç–∞—Ç–æ–∫ –∂–∏–∑–Ω–∏ —Å –∫–µ–º-—Ç–æ, —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –æ–Ω –Ω–∞—Å—Ç—É–ø–∏–ª —Å–∫–æ—Ä–µ–µ.", s: "–ö–æ–≥–¥–∞ –ì–∞—Ä—Ä–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª –°–∞–ª–ª–∏" },
        { t: "–¢–≤–æ–∏ –≥–ª–∞–∑–∞ –ø–æ—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã... —Å–ª–æ–≤–Ω–æ —è —Å–º–æ—Ç—Ä—é –≤ –∫–æ—Å–º–æ—Å.", s: "–ò–∑ —Ç–≤–æ–µ–≥–æ –≤–∑–≥–ª—è–¥–∞" },
        { t: "–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Å—á–∞—Å—Ç—å–µ –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –≤–∞–∂–Ω–µ–µ —Ç–≤–æ–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ.", s: "–í–µ–ª–∏–∫–∏–π –ì—ç—Ç—Å–±–∏" },
        { t: "–ú—ã —Å–≤—è–∑–∞–Ω—ã. –ù–∞–≤—Å–µ–≥–¥–∞. –ù–∏ –≤—Ä–µ–º—è, –Ω–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –º–æ–≥—É—Ç —Ä–∞–∑–ª—É—á–∏—Ç—å –Ω–∞—Å.", s: "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä (–¢–µ–º–∞ –ª—é–±–≤–∏)" },
        { t: "–í –º–æ–µ–º –¥–æ–º–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∏–≥—Ä–∞—Ç—å –º—É–∑—ã–∫–∞, –ø–æ–∫–∞ —Ç—ã —Ä—è–¥–æ–º.", s: "–õ–∞-–õ–∞ –õ–µ–Ω–¥ (–∞–¥–∞–ø—Ç–∞—Ü–∏—è)" },
        { t: "–°–º–µ—Ä—Ç—å –Ω–µ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â—É—é –ª—é–±–æ–≤—å. –û–Ω–∞ –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–¥–µ—Ä–∂–∞—Ç—å –µ–µ.", s: "–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞-–Ω–µ–≤–µ—Å—Ç–∞" },
        { t: "–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —è —Ç–µ–±—è –≤–∏–∂—É, —è –≤–ª—é–±–ª—è—é—Å—å –∑–∞–Ω–æ–≤–æ.", s: "50 –ø–µ—Ä–≤—ã—Ö –ø–æ—Ü–µ–ª—É–µ–≤" },
        { t: "–õ—é–¥–∏ –∑–∞–±—ã–ª–∏ —ç—Ç—É –∏—Å—Ç–∏–Ω—É, –Ω–æ —Ç—ã –Ω–µ –∑–∞–±—ã–≤–∞–π: —Ç—ã —É–Ω–∏–∫–∞–ª—å–Ω–∞ –≤–æ –≤—Å–µ–π –í—Å–µ–ª–µ–Ω–Ω–æ–π.", s: "–ú–∞–ª–µ–Ω—å–∫–∏–π –ø—Ä–∏–Ω—Ü (–∞–¥–∞–ø—Ç–∞—Ü–∏—è)" },

        { t: "–Ø –ø—Ä–∏–ª–µ—Ç–µ–ª –∫ —Ç–µ–±–µ —á–µ—Ä–µ–∑ –≤—Å–µ–ª–µ–Ω–Ω—ã–µ, –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–≤–æ—é —É–ª—ã–±–∫—É.", s: "–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä (—Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)" },
        { t: "–¢—ã ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —è –≤—Å–µ –µ—â–µ –∑–¥–µ—Å—å.", s: "–î–æ –≤—Å—Ç—Ä–µ—á–∏ —Å —Ç–æ–±–æ–π" },
        { t: "–Ø –æ–±–µ—â–∞—é –ª—é–±–∏—Ç—å —Ç–µ–±—è —Å—Ç—Ä–∞—Å—Ç–Ω–æ, –≤–æ –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è—Ö, –≤–µ—á–Ω–æ.", s: "–ö–ª—è—Ç–≤–∞" },
        { t: "–¢—ã –Ω—É–∂–Ω–∞ –º–Ω–µ, –∫–∞–∫ —Å–µ—Ä–¥—Ü—É –Ω—É–∂–µ–Ω —É–¥–∞—Ä.", s: "One Republic" },
        { t: "–õ—é–±–æ–≤—å, –∫–∞–∫ –≤–µ—Ç–µ—Ä. –ï–µ –Ω–µ –≤–∏–¥–∏—à—å, –Ω–æ —á—É–≤—Å—Ç–≤—É–µ—à—å.", s: "–°–ø–µ—à–∏ –ª—é–±–∏—Ç—å" },
        { t: "–¢—ã ‚Äî –º–æ–µ –≤–µ–ª–∏—á–∞–π—à–µ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ.", s: "–í–≤–µ—Ä—Ö" },
        { t: "–¢–≤–æ–∏ –≥–ª–∞–∑–∞ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–µ—â—å, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —è —Ö–æ—á—É —Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—á–Ω–æ.", s: "–ó–≤–µ–∑–¥–∞ —Ä–æ–¥–∏–ª–∞—Å—å" },
        { t: "–ó–∞–≤—Ç—Ä–∞ –Ω–∞—Å—Ç—É–ø–∏—Ç —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –¥–µ–Ω—å...", s: "–¢–≤–æ–π –ø–∞—Ä–µ–Ω—å" },
        { t: "–Ø —É–∂–µ –≤ –ø—É—Ç–∏. –ñ–¥–∏ —á—É–¥–∞.", s: "–°–∫–æ—Ä–æ..." },
        { t: "–û–±–µ—Ä–Ω–∏—Å—å... –Ø –ª—é–±–ª—é —Ç–µ–±—è! –° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, –º–æ—è —Ä–æ–¥–Ω–∞—è!", s: "–¢–≤–æ–π –≥–ª–∞–≤–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ (–Ø)" } 
    ];

    const LS_KEY = 'cozy_christmas_calendar_2024';
    const calendarEl = document.getElementById('calendar');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modalText');
    const modalSource = document.getElementById('modalSource');

    // --- –°–ù–ï–ì –ù–ê CANVAS (–ª–µ–≥–∫–∏–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π) ---
    const canvas = document.getElementById('snowCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    const snowflakes = [];

    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function createSnowflake() {
        return {
            x: Math.random() * width,
            y: Math.random() * -50,
            r: Math.random() * 3 + 1,
            d: Math.random() * 1 + 0.5, // –ø–ª–æ—Ç–Ω–æ—Å—Ç—å
            a: Math.random() * Math.PI * 2 // —É–≥–æ–ª
        };
    }

    for (let i = 0; i < 100; i++) snowflakes.push(createSnowflake());

    function drawSnow() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = "rgba(255, 255, 255, 0.6)";
        ctx.beginPath();
        for (let i = 0; i < snowflakes.length; i++) {
            const f = snowflakes[i];
            ctx.moveTo(f.x, f.y);
            ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
        }
        ctx.fill();
        updateSnow();
        requestAnimationFrame(drawSnow);
    }

    function updateSnow() {
        for (let i = 0; i < snowflakes.length; i++) {
            const f = snowflakes[i];
            f.y += Math.cos(f.a) + f.d + f.r/2;
            f.x += Math.sin(f.a) * 0.5;
            
            if (f.y > height) {
                snowflakes[i] = createSnowflake();
            }
        }
    }
    drawSnow();

    // --- –õ–û–ì–ò–ö–ê –ö–ê–õ–ï–ù–î–ê–†–Ø ---
    function init() {
        const now = new Date();
        const currentMonth = now.getMonth(); // 11 = –î–µ–∫–∞–±—Ä—å
        const currentDay = now.getDate();
        
        // –ß—Ç–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
        let opened = JSON.parse(localStorage.getItem(LS_KEY)) || [];

        for (let i = 1; i <= 30; i++) {
            const dayBox = document.createElement('div');
            dayBox.className = 'gift-box';
            
            // –õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
            let isLocked = true;
            // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ –º–µ—Å—è—Ü > –î–µ–∫–∞–±—Ä—è (–∑–Ω–∞—á–∏—Ç —è–Ω–≤–∞—Ä—å —Å–ª–µ–¥ –≥–æ–¥–∞) –ò–õ–ò (–ú–µ—Å—è—Ü –î–µ–∫–∞–±—Ä—å –ò –¥–µ–Ω—å >= i)
            if (currentMonth > 11) isLocked = false; 
            if (currentMonth === 11 && currentDay >= i) isLocked = false;

            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è 30-–≥–æ
            if (i === 30) dayBox.classList.add('special-day');

            // –ï—Å–ª–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ
            if (opened.includes(i)) {
                dayBox.classList.add('opened');
                isLocked = false;
            } else if (isLocked) {
                dayBox.classList.add('locked');
            }

            dayBox.innerHTML = `
                <div class="bow"></div>
                <div class="day-number">${i}</div>
            `;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            dayBox.onclick = () => {
                if (dayBox.classList.contains('locked')) {
                    alert(`–¢—Å—Å—Å! –≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ ${i} –¥–µ–∫–∞–±—Ä—è! üéÑ`);
                    return;
                }
                
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º
                if (!opened.includes(i)) {
                    dayBox.classList.add('opened');
                    opened.push(i);
                    localStorage.setItem(LS_KEY, JSON.stringify(opened));
                    // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–∏—Å—å–º–æ–º
                    setTimeout(() => showLetter(i), 600);
                } else {
                    // –ï—Å–ª–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∏—Å—å–º–æ
                    showLetter(i);
                }
            };

            calendarEl.appendChild(dayBox);
        }
    }

    function showLetter(day) {
        const data = quotes[day - 1];
        modalText.innerHTML = `"${data.t}"`;
        modalSource.innerText = `‚Äî ${data.s}`;
        modal.style.display = 'flex';
    }

    window.closeModal = function() {
        modal.style.display = 'none';
    }

    init();

</script>

</body>
</html>
